<ion-header [translucent]="true" mode="md">
  <ion-toolbar>
    <ion-avatar slot="start" class="user_avatar" *ngIf="userDetails">
      <app-name-img [name]="getName()" [classes]="'sm'" *ngIf="userDetails.imageUrl.trim() === ''"></app-name-img>
      <img *ngIf="userDetails.imageUrl.trim() !== ''" alt="user" [src]="userDetails && userDetails.imageUrl.trim() !== '' ? userDetails.imageUrl: 'https://ionicframework.com/docs/img/demos/avatar.svg'" />
    </ion-avatar>

    <ion-avatar slot="start" class="user_avatar" *ngIf="!userDetails">
      <ion-skeleton-text [animated]="true"></ion-skeleton-text>
    </ion-avatar>

    <ion-toggle aria-label="Change Role" labelPlacement="end" color="primary" [checked]="userRole === 'Admin'" slot="end" (ionChange)="roleToggle($event)" class="ion-margin-end" [disabled]="!userDetails" *ngIf="isSwitchable === 'true'">Admin</ion-toggle>

    <ion-button mode="md" slot="end" shape="round" [strong]="true" [color]="'primary'" fill="solid" class="ion-padding-horizontal ion-text-wrap clock_in_btn" (click)="toggleStopwatch()" *ngIf="userDetails && userRole === 'Employee'">
      <span class="stopwatch-time">{{ buttonLabel }}</span>
      <ion-icon slot="end" icon="time"></ion-icon>
    </ion-button>
    <ion-thumbnail slot="end" class="logo_img ion-margin-end" *ngIf="userRole !== 'Employee'">
      <ion-img src="../../../assets/icon/hr-atlas_48.png" alt="HR-Atlas"></ion-img>
    </ion-thumbnail>
    <ion-progress-bar type="indeterminate" *ngIf="!isDataLoaded"></ion-progress-bar>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-refresher slot="fixed" (ionRefresh)="handleRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>

  <!-- <img src="../../assets/images/logo.png" alt="Photo" class="logo_img2" /> -->

  <!-- <div class="ion-text-center"><ion-spinner color="medium" *ngIf="!isDataLoaded || !userDetails" name="circular"></ion-spinner></div> -->

  <ion-card mode="ios" color="primary" class="time_card" *ngIf="userDetails && userRole === 'Employee' && isRunning">
    <ion-card-header>
      <ion-card-title>Work Duration</ion-card-title>
      <ion-icon name="time" size="large"></ion-icon>
    </ion-card-header>
    <ion-card-content>
      <div class="flex_div">
        <ion-label class="stopwatch-time">{{ stopwatchTime }}</ion-label>
        <ion-button mode="ios" [shape]="'round'" [strong]="true" color="light" (click)="toggleStopwatch()">Clock Out</ion-button>
      </div>
    </ion-card-content>
  </ion-card>

  <ion-grid *ngIf="!isDataLoaded" class="ion-margin-top">
    <ion-row class="row_one">
      <ion-col size="4" sizeSm="3" *ngFor="let card of demoCard">
        <ion-card mode="md">
          <ion-card-content>
            <ion-avatar class="skeleton_avatar">
              <ion-skeleton-text [animated]="true"></ion-skeleton-text>
            </ion-avatar>
            <p><ion-skeleton-text [animated]="true" style="width: 100%;"></ion-skeleton-text></p>
          </ion-card-content>
        </ion-card>
      </ion-col>
    </ion-row>
  </ion-grid>

  <ion-grid *ngIf="isDataLoaded && userDetails" class="ion-margin-top">
    <ion-row class="row_one">
      <ion-col size="12" class="ion-margin-bottom" *ngIf="userRole === 'Admin'">
        <ion-button mode="md" shape="round" class="add_emp_btn" (click)="addEmployee()">
          <ion-icon name="person-add-outline" slot="start"></ion-icon>
          Add Employees
        </ion-button>
      </ion-col>

      <ion-col size="4" sizeSm="3">
        <ion-card mode="md" type="button" [routerLink]="['/tabs/directory']">
          <ion-card-content>
            <div class="icon_card">
              <ion-icon name="file-tray-full-outline" aria-hidden="true" size="large"></ion-icon>
            </div>
            <ion-label>Directory</ion-label>
          </ion-card-content>
        </ion-card>
      </ion-col>

      <ion-col size="4" sizeSm="3">
        <ion-card mode="md" type="button" [routerLink]="'/tabs/attendance'">
          <ion-card-content>
            <div class="icon_card">
              <ion-icon name="hand-right-outline" aria-hidden="true" size="large"></ion-icon>
            </div>
            <ion-label>Attendance</ion-label>
          </ion-card-content>
        </ion-card>
      </ion-col>

      <ion-col size="4" sizeSm="3">
        <ion-card mode="md" type="button" (click)="showleaves()">
          <ion-card-content>
            <div class="icon_card">
              <ion-icon name="fast-food-outline" aria-hidden="true" size="large"></ion-icon>
            </div>
            <ion-label>Leaves</ion-label>
          </ion-card-content>
        </ion-card>
      </ion-col>
      
      <ion-col size="4" sizeSm="3">
        <ion-card mode="md" type="button" [routerLink]="['/tabs/payroll']">
          <ion-card-content>
            <div class="icon_card">
              <ion-icon name="cash-outline" aria-hidden="true" size="large"></ion-icon>
            </div>
            <ion-label>Payroll</ion-label>
          </ion-card-content>
        </ion-card>
      </ion-col>

      <ion-col size="4" sizeSm="3" *ngIf="userRole === 'Admin'">
        <ion-card mode="md" type="button" [routerLink]="['/tabs/settings']">
          <ion-card-content>
            <div class="icon_card">
              <ion-icon name="cog-outline" aria-hidden="true" size="large"></ion-icon>
            </div>
            <ion-label>Settings</ion-label>
          </ion-card-content>
        </ion-card>
      </ion-col>
    </ion-row>
  </ion-grid>
  <ion-title class="ion-text-center ion-margin-vertical" *ngIf="isDataLoaded && !userDetails">Please Login First</ion-title>
</ion-content>
