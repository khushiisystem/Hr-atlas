<ion-header mode="md" [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-button mode="md" fill="clear" [routerDirection]="'back'" (click)="goBack()" class="noBg noRipple">
        <ion-icon name="chevron-back-outline" aria-hidden="true" slot="icon-only"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title>Attendance Status</ion-title>

    <ion-thumbnail slot="end" class="logo_img ion-margin-end">
      <ion-img src="../../../assets/icon/hr-atlas_logo_2.png" alt="HR-Atlas"></ion-img>
    </ion-thumbnail>
  </ion-toolbar>
</ion-header>

<ion-content fullscreen="true" color="light">
  <ion-refresher slot="fixed" (ionRefresh)="handleRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>
  <div class="container">
    <app-custom-callendar (attendDate)="selectDate($event)"></app-custom-callendar>
    <!-- <div class="searchInput ion-padding-horizontal ion-margin-top" style="background-color: #fff;">
      <ion-input placeholder="Search" [clearOnEdit]="true" [clearInput]="true" fill="outline" shape="round" [(ngModel)]="searchString" (ionInput)="onSearch()" legacy="false" [color]="'light'"></ion-input>
    </div> -->

    <ion-list *ngIf="isDataLoaded" [inset]="true" mode="md">
      <ion-item lines="inset" [button]="true" [detail]="false" type="button" mode="md" class="list-item" *ngFor="let employee of employeeList; index as i;" (click)="selectEmployee(employee)">
        <ion-avatar class="employee_img" slot="start" mode="md">
          <app-name-img [name]="getName(employee)" [classes]="'sm'" *ngIf="employee.imageUrl.trim() === ''"></app-name-img>
          <img alt="imployee" *ngIf="employee.imageUrl.trim() != ''" [src]="employee.imageUrl" />
        </ion-avatar>
          <ion-label>{{employee.firstName | titlecase}} {{employee.lastName || '' | titlecase}}</ion-label>
        <ion-button fill="solid" mode="ios" [color]="getStatus(employee.guid) === 'Absent' ? 'danger' : 'success'" slot="end" shape="round" class="statusBtn" *ngIf="attendanceLoaded">{{getStatus(employee.guid).slice(0,1)}}</ion-button>
        <ion-thumbnail slot="end" *ngIf="!attendanceLoaded" class="skeleton_thumb">
          <ion-skeleton-text [animated]="true"></ion-skeleton-text>
        </ion-thumbnail>
      </ion-item>
    </ion-list>

    <div class="ion-padding ion-text-center" *ngIf="employeeList.length < 1 || attendanceList.length === 0"
      style="background-color: #fff;">
      <ion-spinner name="crescent" color="tertiary" *ngIf="!isDataLoaded"></ion-spinner>
      <ion-text *ngIf="isDataLoaded && employeeList.length < 1">Data not found</ion-text>
    </div>
  </div>

  <ion-infinite-scroll #infiniteScroll (ionInfinite)="loadData($any($event))" [position]="'bottom'">
    <ion-infinite-scroll-content loadingSpinner="bubbles"
      loadingText="Loading more data..."></ion-infinite-scroll-content>
  </ion-infinite-scroll>
</ion-content>