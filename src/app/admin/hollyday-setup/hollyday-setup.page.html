<ion-header [translucent]="true" mode="ios">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-button mode="md" fill="clear" [routerDirection]="'back'" (click)="closeModal()" class="noBg noRipple">
        <ion-icon name="close-outline" aria-hidden="true" slot="icon-only"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title>{{action | titlecase}} Event</ion-title>
    <ion-thumbnail slot="end" class="logo_img ion-margin-end">
      <ion-img src="../../../assets/icon/hr-atlas_logo_2.png" alt="HR-Atlas"></ion-img>
    </ion-thumbnail>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" color="light">
  <form [formGroup]="holdayForm">
    <ion-list mode="ios" inset="true">
      <ion-item [detail]="false">
        <ion-input labelPlacement="floating" aria-label="Event Date" placeholder="Event Title *" formControlName="eventTitle" type="text" inputmode="text" enterkeyhint="next">
          <div slot="label">Event Title <ion-text color="danger">*</ion-text></div>
        </ion-input>
        <ion-icon slot="end" aria-label="Title is required." title="Title is required." name="alert-circle" color="danger" aria-hidden="true" *ngIf="holdayForm.controls['eventTitle'].touched && holdayForm.controls['eventTitle'].errors"></ion-icon>
      </ion-item>
    </ion-list>
    <ion-list mode="ios" inset="true">
      <ion-item detail="true" (click)="openCalendar1 = true" detailIcon="calendar-number">
        <ion-input labelPlacement="floating" aria-label="Event Date" placeholder="Event Date *" [value]="getValue() | date" [readonly]="true">
          <div slot="label">Event Date <ion-text color="danger">*</ion-text></div>
        </ion-input>
      </ion-item>
    </ion-list>

    <div class="ion-padding">
      <ion-note color="medium">All * fields are mandatory.</ion-note>
    </div>
    <ion-button mode="ios" [expand]="'full'" class="submitBtn ion-margin-top" color="primary" shape="round" [strong]="true" [disabled]="holdayForm.invalid || isInProcess" (click)="submit()">{{action | titlecase}} Event</ion-button>
    <ion-button mode="ios" [expand]="'full'" class="submitBtn deleteBtn ion-margin-top" color="danger" shape="round" [strong]="true" [disabled]="isInProcess" *ngIf="action !== 'add'" (click)="deleteEvenet()">Delete Event</ion-button>

    <ion-modal [isOpen]="openCalendar1" mode="md" [keepContentsMounted]="true" #effectiveDateModal (ionModalDidDismiss)="openCalendar1 = false" [initialBreakpoint]="0.65">
      <ng-template>
        <ion-content>
          <ion-datetime [preferWheel]="true" [presentation]="'date'" mode="md" [size]="'cover'" [showDefaultTitle]="true" #effectiveDate (ionChange)="setEventDate($any($event))">
            <ion-label slot="title">Select Effective Date</ion-label>

            <ion-buttons slot="buttons" class="datemodal_btns">
              <ion-button color="danger" shape="round" [strong]="true" class="cancel_btn" (click)="effectiveDate.cancel(); openCalendar1 = false;">Cancel</ion-button>
              <ion-button color="primary" fill="solid" shape="round" [strong]="true" class="saveBtn" [disabled]="effectiveDate.isDateEnabled" (click)="effectiveDate.confirm();">Done</ion-button>
            </ion-buttons>
          </ion-datetime>
        </ion-content>
      </ng-template>
    </ion-modal>
  </form>
</ion-content>
