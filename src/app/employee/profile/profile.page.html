<ion-header [translucent]="true" mode="md">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-button mode="md" type="button" [routerDirection]="'back'" (click)="goBack()" fill="clear" class="noBg noRipple">
        <ion-icon name="chevron-back-outline" aria-hidden="true"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title>Profile</ion-title>
    <ion-buttons slot="end">
      <ion-button mode="md" (click)="logout()" color="danger" fill="clear" [strong]="true" *ngIf="employeeDetail">
        <ion-icon name="log-out-outline" slot="icon-only" aria-hidden="true"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
    <div class="container" *ngIf="employeeDetail">
        <ion-card mode="md" class="profile_card ion-margin">
          <ion-item lines="none" class="noBg">
            <div class="emp_avatar" slot="start">
              <ion-avatar class="employee_img">
                <app-name-img [name]="getName()" *ngIf="employeeDetail.imageUrl.trim() === ''"></app-name-img>
                <img *ngIf="employeeDetail.imageUrl.trim() != ''" alt="Employee" [src]="employeeDetail.imageUrl || 'https://ionicframework.com/docs/img/demos/avatar.svg'" />
              </ion-avatar>
              <span class="edit_btn">
                <ion-icon name="pencil" aria-hidden="true"></ion-icon>
              </span>
            </div>
    
            <div class="emp_name_role">
              <ion-label class="emp_name">{{employeeDetail.firstName | titlecase}} {{employeeDetail.lastName || "" | titlecase}}</ion-label>
              <ion-text class="emp_role" *ngIf="employeeDetail.employeeWorkDetails">{{employeeDetail.employeeWorkDetails.jobTitle}}</ion-text>
            </div>
          </ion-item>
        </ion-card>
    
        <ion-accordion-group expand="inset" #accordionGroup mode="md">
          <ion-accordion value="Personal" mode="md">
            <ion-item slot="header" class="accordion_head_item">
              <div>
                <ion-label>Personal</ion-label>
                <ion-text class="sub-header">Personal info, contact info, address, social info</ion-text>
              </div>
            </ion-item>
            <div class="ion-padding" slot="content">
              
              <ion-item-divider>
                <div class="personal_info">
                  <div class="nested_item ion-margin-bottom">
                    <ion-label>Personal Information</ion-label>
                    <div class="toggle_btn" slot="end">
                      <ion-icon></ion-icon>
                    </div>
                    <ion-ripple-effect></ion-ripple-effect>
                  </div>
    
                  <div class="personal_info_content table_row">
                    <ion-row>
                      <ion-col size="12">
                        <ion-label>Full Name</ion-label>
                        <ion-input aria-label="Full Name" [readonly]="true" [value]="employeeDetail.firstName + ' '+ employeeDetail.lastName || '-'"></ion-input>
                      </ion-col>
        
                      <ion-col size="6">
                        <ion-label>Date of Birth</ion-label>
                        <ion-input aria-label="Date of Birth" [readonly]="true" [value]="employeeDetail.dateOfBirth || '-' | date"></ion-input>
                      </ion-col>
        
                      <ion-col size="6">
                        <ion-label>Gender</ion-label>
                        <ion-input aria-label="Gender" [readonly]="true" [value]="employeeDetail.gender || '-'">
                          <!-- <div slot="label">Gender</div> -->
                        </ion-input>
                      </ion-col>
        
                      <ion-col size="6">
                        <ion-label>Blood Group</ion-label>
                        <ion-input aria-label="Blood Group" [readonly]="true" [value]="'-'"></ion-input>
                      </ion-col>
        
                      <ion-col size="6">
                        <ion-label>Marital Status</ion-label>
                        <ion-input aria-label="Marital Status" [readonly]="true" [value]="employeeDetail.maritalStatus || '-'"></ion-input>
                      </ion-col>
                    </ion-row>
                  </div>
                </div>
              </ion-item-divider>
  
              <ion-item-divider>
                <div class="contact_info ion-margin-top ion-padding-top">
                  <div class="nested_item ion-margin-bottom">
                    <ion-label>Contact Information</ion-label>
                    <div class="toggle_btn" slot="end">
                      <ion-icon></ion-icon>
                    </div>
                  </div>
    
                  <div class="contact_info_content table_row">
                    <ion-row>
                      <ion-col size="12">
                        <ion-label>Phone Number</ion-label>
                        <ion-input aria-label="Phone Number" [value]="employeeDetail.mobileNumber || '-'"></ion-input>
                      </ion-col>
    
                      <ion-col size="12">
                        <ion-label>Alternate Phone Number</ion-label>
                        <ion-input aria-label="Alternate Phone Number" [value]="employeeDetail.alternateMobileNumber || '-'"></ion-input>
                      </ion-col>
    
                      <ion-col size="12">
                        <ion-label>Personal Email</ion-label>
                        <ion-input aria-label="Personal Email" [value]="employeeDetail.email || '-'"></ion-input>
                      </ion-col>
    
                      <ion-col size="12">
                        <ion-label>Official Email</ion-label>
                        <ion-input aria-label="Official Email" [value]="employeeDetail.officialEmail || '-'"></ion-input>
                      </ion-col>
                    </ion-row>
                  </div>
                </div>
              </ion-item-divider>
  
              <ion-item-divider>
                <div class="address_info ion-margin-top ion-padding-top">
                  <div class="nested_item ion-margin-bottom">
                    <ion-label>Address</ion-label>
                    <div class="toggle_btn" slot="end">
                      <ion-icon></ion-icon>
                    </div>
                  </div>
    
                  <div class="address_info_content table_row">
                    <ion-row>
                      <ion-col size="12">
                        <ion-label>Current Address</ion-label>
                        <ion-input aria-label="Current Address" [value]="employeeDetail.permanentAddress ? getAddress(employeeDetail.currentAddress) : '-'"></ion-input>
                      </ion-col>
    
                      <ion-col size="12">
                        <ion-label>Permanent Address</ion-label>
                        <ion-input aria-label="Permanent Address" [value]="employeeDetail.permanentAddress ? getAddress(employeeDetail.permanentAddress) : '-'"></ion-input>
                      </ion-col>
                    </ion-row>
                  </div>
                </div>
              </ion-item-divider>
  
              <ion-item [lines]="'none'" [button]="false" *ngIf="employeeDetail.linkedinUrl || employeeDetail.facebookUrl || employeeDetail.twitterUrl">
                <div class="social_info ion-margin-top ion-padding-top">
                  <div class="nested_item ion-margin-bottom">
                    <ion-label>Social Information</ion-label>
                    <div class="toggle_btn" slot="end">
                      <ion-icon></ion-icon>
                    </div>
                  </div>
                  
                  <div class="social_info_content">
                    <div class="social_links">                 
                      <a class="link_item linkedin" [href]="employeeDetail.linkedinUrl" rel="noopener" target="_blank" *ngIf="employeeDetail.linkedinUrl">
                        <ion-icon name="logo-linkedin" aria-hidden="true" size="large"></ion-icon>
                      </a>
                      <a class="link_item fb" [href]="employeeDetail.facebookUrl" rel="noopener" target="_blank" *ngIf="employeeDetail.facebookUrl">
                        <ion-icon name="logo-facebook" aria-hidden="true" size="large"></ion-icon>
                      </a>
                      <a class="link_item twitter" [href]="employeeDetail.twitterUrl" rel="noopener" target="_blank" *ngIf="employeeDetail.twitterUrl">
                        <ion-icon name="logo-twitter" aria-hidden="true" size="large"></ion-icon>
                      </a>
                    </div>
                  </div>
                </div>
              </ion-item>
            </div>
          </ion-accordion>
          
          <ion-accordion value="Team" mode="md">
              <ion-item slot="header" class="accordion_head_item">
                  <div>
                      <ion-label>Team</ion-label>
                      <!-- <ion-text class="sub-header">Basic info, work info, work history</ion-text> -->
                  </div>
              </ion-item>
              <div class="ion-padding" slot="content">
                <ion-label>Comming Soon!</ion-label>
              </div>
          </ion-accordion>
          
          <ion-accordion value="Work" mode="md">
            <ion-item slot="header" class="accordion_head_item">
              <div>
                <ion-label>Work</ion-label>
                <ion-text class="sub-header">Basic info, work info, work history</ion-text>
              </div>
            </ion-item>
            <div class="ion-padding" slot="content">
              
              <ion-item-divider>
                <div class="basic_info">
                  <div class="nested_item ion-margin-bottom">
                    <ion-label>Basic Information</ion-label>
                    <div class="toggle_btn" slot="end">
                      <ion-icon></ion-icon>
                    </div>
                  </div>
    
                  <div class="basic_info_content table_row">
                    <ion-row>
                      <ion-col size="12">
                        <ion-label>Employee ID</ion-label>
                        <ion-input aria-label="Employee ID" [value]="workDetail ? workDetail.employeeId : '--'"></ion-input>
                      </ion-col>
    
                      <ion-col size="6">
                        <ion-label>Employee Type</ion-label>
                        <ion-input aria-label="Employee Type" [value]="workDetail ? workDetail.employeeType : '--'"></ion-input>
                      </ion-col>
    
                      <ion-col size="6">
                        <ion-label>Status</ion-label>
                        <ion-input aria-label="Status" [value]="workDetail ? workDetail.status : '--'"></ion-input>
                      </ion-col>
    
                      <ion-col size="6">
                        <ion-label>Date of Joining</ion-label>
                        <ion-input aria-label="Date of Joining" *ngIf="workDetail && workDetail.joiningDate" [value]="workDetail.joiningDate | date"></ion-input>
                        <ion-input aria-label="Date of Joining" *ngIf="!workDetail || !workDetail.joiningDate" [value]="'--'"></ion-input>
                      </ion-col>
    
                      <ion-col size="6">
                        <ion-label>Work Experience</ion-label>
                        <ion-input aria-label="Work Experience" [value]="workDetail ? workDetail.work_experience : '--'"></ion-input>
                      </ion-col>                  
    
                      <ion-col size="12">
                        <ion-label>Work Location</ion-label>
                        <ion-input aria-label="Work Location" [value]="workDetail ? workDetail.workLocation : '--'"></ion-input>
                      </ion-col>
    
                      <ion-col size="6">
                        <ion-label>Probation Period</ion-label>
                        <ion-input aria-label="Probation Period" [value]="workDetail ? workDetail.probationPeriod : '--'"></ion-input>
                      </ion-col>
                    </ion-row>
                  </div>
                </div>
              </ion-item-divider>
  
              <ion-item-divider *ngIf="workDetail">
                <div class="work_info ion-margin-top ion-padding-top">
                  <div class="nested_item ion-margin-bottom">
                    <ion-label>Work Information</ion-label>
                    <div class="toggle_btn" slot="end">
                      <ion-icon></ion-icon>
                    </div>
                  </div>
    
                  <div class="work_info_content table_row">
                    <ion-row>
                      <ion-col size="12">
                        <ion-label>Designation</ion-label>
                        <ion-input aria-label="Designation" [value]="workDetail ? workDetail.designation : '--'"></ion-input>
                      </ion-col>
  
                      <ion-col size="12">
                        <ion-label>Job Title</ion-label>
                        <ion-input aria-label="Job Title" [value]="workDetail ? workDetail.jobTitle : '--'"></ion-input>
                      </ion-col>
    
                      <ion-col size="12">
                        <ion-label>Department</ion-label>
                        <ion-input aria-label="Department" [value]="workDetail ? workDetail.department : '--'"></ion-input>
                      </ion-col>
    
                      <ion-col size="12">
                        <ion-label>Sub Department</ion-label>
                        <ion-input aria-label="Sub Department" [value]="workDetail ? workDetail.subDepartment : '--'"></ion-input>
                      </ion-col>
                    </ion-row>
                  </div>
                </div>
              </ion-item-divider>
  
              <ion-item [lines]="'none'" [button]="false" *ngIf="workDetail && workDetail.workHistory.length > 0">
                <div class="work_history_info ion-margin-top ion-padding-top">
                  <div class="nested_item ion-margin-bottom">
                    <ion-label>Work History</ion-label>
                    <div class="toggle_btn" slot="end">
                      <ion-icon></ion-icon>
                    </div>
                  </div>
    
                  <div class="work_history_info_content table_row" *ngFor="let history of workDetail.workHistory; index as a;">
                    <ion-row>
                      <ion-col size="12">
                        <ion-label>Department</ion-label>
                        <ion-input aria-label="Department" [value]="history.department ? history.department : '--'"></ion-input>
                      </ion-col>
    
                      <ion-col size="12">
                        <ion-label>Designation</ion-label>
                        <ion-input aria-label="Designation" [value]="history.designation ? history.designation : '--'"></ion-input>
                      </ion-col>
    
                      <ion-col size="12">
                        <ion-label>From - To</ion-label>
                        <ion-input aria-label="Work Duration" *ngIf="history.from && history.to " [value]="(history.from | date) + ' - '+ (history.to | date) "></ion-input>
                        <ion-input aria-label="Work Duration" *ngIf="!history.from || !history.to " [value]="'--'"></ion-input>
                      </ion-col>
                    </ion-row>
                  </div>
                </div>
              </ion-item>
            </div>
          </ion-accordion>

          <ion-accordion value="Settings" mode="md">
              <ion-item slot="header" class="accordion_head_item">
                <div>
                  <ion-label>Settings</ion-label>
                  <ion-text class="sub-header">Edit profile, Change Password</ion-text>
                </div>
              </ion-item>

              <div class="ion-padding" slot="content">                  
                <ion-item [lines]="'full'" type="button" [button]="true" [detail]="true" (click)="editProfile()" class="settingBtns_item">
                  <ion-icon name="pencil" aria-hidden="true" aria-label="Edit Profile" slot="start" color="primary"></ion-icon>
                  <ion-label color="primary">Edit Profile</ion-label>
                </ion-item>

                <ion-item [lines]="'full'" type="button" [button]="true" [detail]="true" class="settingBtns_item" (click)="setupWorkInfo()" *ngIf="employeeDetail.role === 'Admin'">
                  <ion-icon name="person" aria-hidden="true" slot="start" color="primary"></ion-icon>
                  <ion-label color="primary">{{workDetail ? 'Update' : 'Add'}} Work</ion-label>
                </ion-item>

                <ion-item [lines]="'full'" type="button" routerLink="/change-password" [detail]="true" class="settingBtns_item">
                  <ion-icon name="key" aria-hidden="true" aria-label="Change Password" slot="start" color="primary"></ion-icon>
                  <ion-label color="primary">Change Password</ion-label>
                </ion-item>
              </div>
          </ion-accordion>
        </ion-accordion-group>
        
        <ion-card type="button" mode="md" class="ion-margin">
          <ion-item [lines]="'none'" [detail]="true" [button]="true" [mode]="'md'" class="accordion_head_item btn_item" (click)="workWeek()">
            <div>
              <ion-label>Work-week</ion-label>
              <ion-text class="sub-header">Work-week assigned to the staff</ion-text>
            </div>
          </ion-item>
        </ion-card>

        <ion-card color="danger" type="button" mode="md" class="ion-margin">
          <ion-item [lines]="'none'" [detail]="false" [button]="true" [mode]="'md'" color="danger" (click)="logout()">
            <ion-label>Log Out</ion-label>
            <ion-icon slot="end" name="log-out-outline" aria-hidden="true"></ion-icon>
          </ion-item>
        </ion-card>
        <!-- <ion-card (click)="openWorkPage() ">
          <ion-card-header color="danger "> Work </ion-card-header>
        </ion-card> -->
    </div>
</ion-content>
