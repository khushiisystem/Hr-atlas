<ion-header [translucent]="true" mode="md">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-button mode="md" fill="clear" [routerDirection]="'back'" (click)="goBack()" class="noBg noRipple">
        <ion-icon name="chevron-back-outline" aria-hidden="true" slot="icon-only"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title>Employee Profile</ion-title>
    <img src="../../../assets/images/logo.png" height="25" alt="Spundan" class="logo_img ion-margin-end" slot="end">
    <ion-progress-bar color="light" type="inderminate" *ngIf="!dataLoaded && !employeeDetail"></ion-progress-bar>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-refresher slot="fixed" (ionRefresh)="handleRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>

  <div class="container loadingContent" *ngIf="!employeeDetail">
    <ion-card mode="md">
      <ion-item lines="none" class="noBg ion-margin-bottom" mode="md" button="false">
        <div slot="start" class="ion-margin-top">
          <ion-avatar>
            <ion-skeleton-text [animated]="true" style="width: 100%;"></ion-skeleton-text>
          </ion-avatar>
        </div>
  
        <div class="emp_name_role">
          <ion-skeleton-text [animated]="true" style="width: 90%;"></ion-skeleton-text>
          <ion-skeleton-text [animated]="true" style="width: 50%;"></ion-skeleton-text>
        </div>
      </ion-item>
    </ion-card>

    <ion-card mode="md" *ngFor="let item of randomList">
      <ion-item lines="none" class="noBg ion-margin-bottom" mode="md" button="false">
        <div class="emp_name_role">
          <ion-skeleton-text [animated]="true" style="width: 90%;"></ion-skeleton-text>
          <ion-skeleton-text [animated]="true" style="width: 50%;"></ion-skeleton-text>
        </div>
      </ion-item>
    </ion-card>
  </div>
  
  <div class="container" *ngIf="employeeDetail">
    <ion-card mode="md" class="profile_card ion-margin-vertical">
      <ion-item lines="none" class="noBg">
        <div class="emp_avatar" slot="start">
          <ion-avatar class="employee_img">
            <app-name-img [name]="getName()" *ngIf="employeeDetail.imageUrl.trim() === ''"></app-name-img>
            <img *ngIf="employeeDetail.imageUrl.trim() != ''" alt="Employee" [src]="employeeDetail.imageUrl || 'https://ionicframework.com/docs/img/demos/avatar.svg'" />
          </ion-avatar>
        </div>

        <div class="emp_name_role">
          <ion-label class="emp_name">{{employeeDetail.firstName | titlecase}} {{employeeDetail.lastName || "" | titlecase}}</ion-label>
          <ion-text class="emp_role">{{employeeDetail.role}}</ion-text>
        </div>
      </ion-item>
    </ion-card>

    <ion-card mode="md" class="action_list_card">
      <ion-accordion-group #accordionGroup mode="md" [value]="expandedAccordion" (ionChange)="changeAccordion($event)">
        <ion-accordion value="Personal" mode="md">
          <ion-item slot="header" class="accordion_head_item">
            <div>
              <ion-label>Personal</ion-label>
              <ion-text class="sub-header">Personal info, contact info, address, social info</ion-text>
            </div>
          </ion-item>
          <div class="ion-padding" slot="content">
            
            <ion-item-divider>
              <div class="personal_info">
                <div class="nested_item ion-margin-bottom">
                  <ion-label>Personal Information</ion-label>
                  <div class="toggle_btn" slot="end">
                    <ion-icon></ion-icon>
                  </div>
                  <ion-ripple-effect></ion-ripple-effect>
                </div>
  
                <div class="personal_info_content table_row">
                  <ion-row>
                    <ion-col size="12">
                      <ion-label>Full Name</ion-label>
                      <ion-input aria-label="Full Name" [readonly]="true" [value]="employeeDetail.firstName + ' '+ employeeDetail.lastName || '-'"></ion-input>
                    </ion-col>
      
                    <ion-col size="6">
                      <ion-label>Date of Birth</ion-label>
                      <ion-input aria-label="Date of Birth" [readonly]="true" [value]="employeeDetail.dateOfBirth || '-' | date"></ion-input>
                    </ion-col>
      
                    <ion-col size="6">
                      <ion-label>Gender</ion-label>
                      <ion-input aria-label="Gender" [readonly]="true" [value]="employeeDetail.gender || '-'">
                        <!-- <div slot="label">Gender</div> -->
                      </ion-input>
                    </ion-col>
      
                    <ion-col size="6">
                      <ion-label>Blood Group</ion-label>
                      <ion-input aria-label="Blood Group" [readonly]="true" [value]="'-'"></ion-input>
                    </ion-col>
      
                    <ion-col size="6">
                      <ion-label>Marital Status</ion-label>
                      <ion-input aria-label="Marital Status" [readonly]="true" [value]="employeeDetail.maritalStatus || '-'"></ion-input>
                    </ion-col>
                  </ion-row>
                </div>
              </div>
            </ion-item-divider>

            <ion-item-divider>
              <div class="contact_info ion-margin-top ion-padding-top">
                <div class="nested_item ion-margin-bottom">
                  <ion-label>Contact Information</ion-label>
                  <div class="toggle_btn" slot="end">
                    <ion-icon></ion-icon>
                  </div>
                </div>
  
                <div class="contact_info_content table_row">
                  <ion-row>
                    <ion-col size="12">
                      <ion-label>Phone Number</ion-label>
                      <ion-input aria-label="Phone Number" [value]="employeeDetail.mobileNumber || '-'"></ion-input>
                    </ion-col>
      
                    <ion-col size="12">
                      <ion-label>Alternate Phone Number</ion-label>
                      <ion-input aria-label="Alternate Phone Number" [value]="employeeDetail.alternateMobileNumber || '-'"></ion-input>
                    </ion-col>
      
                    <ion-col size="12">
                      <ion-label>Personal Email</ion-label>
                      <ion-input aria-label="Personal Email" [value]="employeeDetail.email || '-'"></ion-input>
                    </ion-col>
      
                    <ion-col size="12">
                      <ion-label>Official Email</ion-label>
                      <ion-input aria-label="Official Email" [value]="employeeDetail.officialEmail || '-'"></ion-input>
                    </ion-col>
                  </ion-row>
                </div>
              </div>
            </ion-item-divider>

            <ion-item-divider>
              <div class="address_info ion-margin-top ion-padding-top">
                <div class="nested_item ion-margin-bottom">
                  <ion-label>Address</ion-label>
                  <div class="toggle_btn" slot="end">
                    <ion-icon></ion-icon>
                  </div>
                </div>
  
                <div class="address_info_content table_row">
                  <ion-row>
                    <ion-col size="12">
                      <ion-label>Current Address</ion-label>
                      <ion-input aria-label="Current Address" [value]="employeeDetail.permanentAddress ? getAddress(employeeDetail.currentAddress) : '-'"></ion-input>
                    </ion-col>
      
                    <ion-col size="12">
                      <ion-label>Permanent Address</ion-label>
                      <ion-input aria-label="Permanent Address" [value]="employeeDetail.permanentAddress ? getAddress(employeeDetail.permanentAddress) : '-'"></ion-input>
                    </ion-col>
                  </ion-row>
                </div>
              </div>
            </ion-item-divider>

            <ion-item [lines]="'none'" [button]="false">
              <div class="social_info ion-margin-top ion-padding-top">
                <div class="nested_item ion-margin-bottom">
                  <ion-label>Social Information</ion-label>
                  <div class="toggle_btn" slot="end">
                    <ion-icon></ion-icon>
                  </div>
                  <ion-ripple-effect></ion-ripple-effect>
                </div>
                
                <div class="social_info_content">
                  <div class="social_links">                    
                    <a class="link_item linkedin" [href]="employeeDetail.linkedinUrl" rel="noopener" target="_blank" *ngIf="employeeDetail.linkedinUrl">
                      <ion-icon name="logo-linkedin" aria-hidden="true" size="large"></ion-icon>
                    </a>
                    <a class="link_item fb" [href]="employeeDetail.facebookUrl" rel="noopener" target="_blank" *ngIf="employeeDetail.facebookUrl">
                      <ion-icon name="logo-facebook" aria-hidden="true" size="large"></ion-icon>
                    </a>
                    <a class="link_item twitter" [href]="employeeDetail.twitterUrl" rel="noopener" target="_blank" *ngIf="employeeDetail.twitterUrl">
                      <ion-icon name="logo-twitter" aria-hidden="true" size="large"></ion-icon>
                    </a>
                  </div>
                </div>
              </div>
            </ion-item>
          </div>
        </ion-accordion>
        <ion-accordion value="Work" mode="md">
          <ion-item slot="header" class="accordion_head_item">
            <div>
              <ion-label>Work</ion-label>
              <ion-text class="sub-header">Basic info, work info, work history</ion-text>
            </div>
          </ion-item>
          <div class="ion-padding" slot="content">
            
            <ion-item-divider>
              <div class="basic_info">
                <div class="nested_item ion-margin-bottom">
                  <ion-label>Basic Information</ion-label>
                  <div class="toggle_btn" slot="end">
                    <ion-icon></ion-icon>
                  </div>
                </div>
  
                <div class="basic_info_content table_row">
                  <ion-row>
                    <ion-col size="12">
                      <ion-label>Employee ID</ion-label>
                      <ion-input aria-label="Employee ID" [value]="'15412adfs4f5a'"></ion-input>
                    </ion-col>
  
                    <ion-col size="6">
                      <ion-label>Employee Type</ion-label>
                      <ion-input aria-label="Employee Type" [value]="'Full Time'"></ion-input>
                    </ion-col>
  
                    <ion-col size="6">
                      <ion-label>Status</ion-label>
                      <ion-input aria-label="Status" [value]="'Active'"></ion-input>
                    </ion-col>
  
                    <ion-col size="6">
                      <ion-label>Date of Joining</ion-label>
                      <ion-input aria-label="Date of Joining" [value]="'26 April, 1997'"></ion-input>
                    </ion-col>
  
                    <ion-col size="6">
                      <ion-label>Work Experience</ion-label>
                      <ion-input aria-label="Work Experience" [value]="'-'"></ion-input>
                    </ion-col>                  
  
                    <ion-col size="12">
                      <ion-label>Work Location</ion-label>
                      <ion-input aria-label="Work Location" [value]="'Registered Office'"></ion-input>
                    </ion-col>
  
                    <ion-col size="6">
                      <ion-label>Probation Period</ion-label>
                      <ion-input aria-label="Probation Period" [value]="'-'"></ion-input>
                    </ion-col>
                  </ion-row>
                </div>
              </div>
            </ion-item-divider>

            <ion-item-divider>
              <div class="work_info ion-margin-top ion-padding-top">
                <div class="nested_item ion-margin-bottom">
                  <ion-label>Work Information</ion-label>
                  <div class="toggle_btn" slot="end">
                    <ion-icon></ion-icon>
                  </div>
                </div>
  
                <div class="work_info_content table_row">
                  <ion-row>
                    <ion-col size="12">
                      <ion-label>Designation</ion-label>
                      <ion-input aria-label="Designation" [value]="'Associate Software Enginner'"></ion-input>
                    </ion-col>

                    <ion-col size="12">
                      <ion-label>Job Title</ion-label>
                      <ion-input aria-label="Job Title" [value]="'Associate Software Enginner'"></ion-input>
                    </ion-col>
  
                    <ion-col size="6">
                      <ion-label>Department</ion-label>
                      <ion-input aria-label="Department" [value]="'-'"></ion-input>
                    </ion-col>
  
                    <ion-col size="6">
                      <ion-label>Sub Department</ion-label>
                      <ion-input aria-label="Sub Department" [value]="'-'"></ion-input>
                    </ion-col>
                  </ion-row>
                </div>
              </div>
            </ion-item-divider>

            <ion-item [lines]="'none'" [button]="false">
              <div class="work_history_info ion-margin-top ion-padding-top">
                <div class="nested_item ion-margin-bottom">
                  <ion-label>Work History</ion-label>
                  <div class="toggle_btn" slot="end">
                    <ion-icon></ion-icon>
                  </div>
                </div>
  
                <div class="work_history_info_content table_row">
                  <ion-row>
                    <ion-col size="12">
                      <ion-label>Department</ion-label>
                      <ion-input aria-label="Department" [value]="'-'"></ion-input>
                    </ion-col>
  
                    <ion-col size="12">
                      <ion-label>Designation</ion-label>
                      <ion-input aria-label="Designation" [value]="'Associate Software Engineer'"></ion-input>
                    </ion-col>
  
                    <ion-col size="12">
                      <ion-label>From - To</ion-label>
                      <ion-input aria-label="Work Duration" [value]="'15/11/2021 - Present'"></ion-input>
                    </ion-col>
                  </ion-row>
                </div>
              </div>
            </ion-item>
          </div>
        </ion-accordion>

        <ion-accordion value="Setting" mode="md">
          <ion-item slot="header" class="accordion_head_item">
            <div>
              <ion-label>Setting</ion-label>
              <ion-text class="sub-header">Personal info, work info</ion-text>
            </div>
          </ion-item>
          <div class="ion-padding" slot="content">
            <ion-item [lines]="'full'" type="button" [button]="true" [detail]="true" class="btn_item">
              <ion-icon name="person-outline" aria-hidden="true" slot="start" color="primary"></ion-icon>
              <ion-label color="primary">Edit Profile</ion-label>
            </ion-item>

            <ion-item [lines]="'none'" type="button" [button]="true" [detail]="true" class="btn_item" (click)="openWorkModal(employeeDetail.employeeId)">
              <ion-icon name="construct-outline" aria-hidden="true" slot="start" color="primary"></ion-icon>
              <ion-label color="primary">Update Work</ion-label>
            </ion-item>
          </div>
        </ion-accordion>
      </ion-accordion-group>
    </ion-card>
    
    <ion-card type="button" mode="md">
      <ion-item [lines]="'none'" [detail]="true" [button]="true" [mode]="'md'" class="accordion_head_item btn_item" [href]="'employee-work-week/'+employeeId">
        <div>
          <ion-label>Work-week</ion-label>
          <ion-text class="sub-header">Work-week assigned to the staff</ion-text>
        </div>
      </ion-item>
    </ion-card>
  </div>
</ion-content>
