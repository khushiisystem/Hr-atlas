<ion-header [translucent]="true" mode="md">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-button mode="md" fill="clear" [routerDirection]="'back'" (click)="goBack()" class="noBg noRipple">
        <ion-icon name="chevron-back-outline" aria-hidden="true" slot="icon-only"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title>Attendance</ion-title>
    <ion-progress-bar type="indeterminate" *ngIf="!dataLoaded"></ion-progress-bar>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <div class="container" *ngIf="dataLoaded">
    <ion-button mode="md" color="primary" shape="round" type="button" (click)="dateModal = true" fill="solid" mode="md">
      {{getMonthYear().trim() != '' ? getMonthYear() : 'Select Month'}}
      <ion-icon name="chevron-down-outline" aria-hidden="true" slot="end"></ion-icon>
    </ion-button>
    <ion-modal [isOpen]="dateModal" [initialBreakpoint]=".5" [breakpoints]="[0.5, 0.75, 1]" [keepContentsMounted]="true" mode="md" [backdropDismiss]="false" [showBackdrop]="true">
        <ng-template>
          <ion-content>
            <ion-datetime presentation="month-year" size="cover" mode="md" [(ngModel)]="attendanceDate" #yearMonth (ionChange)="selectAttendanceDate($any($event))">
              <ion-label slot="title">Select Year and Month</ion-label>
              <ion-buttons slot="buttons">
                <ion-button mode="md" color="danger" (click)="yearMonth.cancel(); dateModal = false;">Cancel</ion-button>
                <ion-button mode="md" color="primary" [disabled]="!attendanceDate" (click)="yearMonth.confirm(); dateModal = false;">Done</ion-button>
              </ion-buttons>
            </ion-datetime>
          </ion-content>
        </ng-template>
    </ion-modal>


    <!-- ------------ attendance list ----------------- -->
    <div class="attendance_list">
      <ion-card class="attendance_Card" mode="md">
        <ion-card-header>
          <ion-card-title>{{getWeek(attendanceDate)}}</ion-card-title>
          <ion-text class="attendance_status" [color]="'success'">{{attendanceStatus[0]}}</ion-text>
        </ion-card-header>
        <ion-card-content>
          <ion-row class="sort_desc ion-margin-top">
            <ion-col size="6">
              <ion-text>In Time</ion-text>
            </ion-col>
            <ion-col size="6">
              <ion-label>11: 04 AM</ion-label>
            </ion-col>
            <ion-col size="6">
              <ion-text>Out Time</ion-text>
            </ion-col>
            <ion-col size="6">
              <ion-label>08: 04 PM</ion-label>
            </ion-col>
            <ion-col size="6">
              <ion-text>Work Duration</ion-text>
            </ion-col>
            <ion-col size="6">
              <ion-label>09:00</ion-label>
            </ion-col>
          </ion-row>
        </ion-card-content>
      </ion-card>

      <ng-container *ngFor="let dateItem of attendanceDateList; index as i;">
        <ion-card class="attendance_Card" mode="md" *ngIf="dateItem.getDay() !== 0">
          <ion-card-header (click)="collapseCard(i)">
            <ion-card-title>{{getWeek(dateItem)}}</ion-card-title>
            <ion-text class="attendance_status" [color]="'success'">{{attendanceStatus[0]}}</ion-text>
          </ion-card-header>
          <ion-card-content *ngIf="expandedCards.includes(i)">
            <ion-row class="sort_desc ion-margin-top">
              <ion-col size="6">
                <ion-text>In Time</ion-text>
              </ion-col>
              <ion-col size="6">
                <ion-label>11: 04 AM</ion-label>
              </ion-col>
              <ion-col size="6">
                <ion-text>Out Time</ion-text>
              </ion-col>
              <ion-col size="6">
                <ion-label>08: 04 PM</ion-label>
              </ion-col>
              <ion-col size="6">
                <ion-text>Work Duration</ion-text>
              </ion-col>
              <ion-col size="6">
                <ion-label>09:00</ion-label>
              </ion-col>
            </ion-row>
          </ion-card-content>
        </ion-card>
      </ng-container>
    </div>
  </div>
</ion-content>
