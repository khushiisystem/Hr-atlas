<ion-header [translucent]="true" mode="md">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-button mode="md" [routerDirection]="'back'" (click)="goBack()" fill="clear" [ariaDisabled]="true" class="noRipple noBg">
        <ion-icon name="chevron-back-outline" slot="icon-only"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title>Employee List</ion-title>
    <ion-progress-bar type="indeterminate" *ngIf="!isDataLoaded"></ion-progress-bar>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-refresher slot="fixed" (ionRefresh)="handleRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>
  <div class="container ion-padding-top"  *ngIf="userRole === 'Admin'">
    <ion-row class="ion-padding-horizontal">
      <ion-col size="12">
        <ion-input placeholder="Search" [clearOnEdit]="true" [clearInput]="true" fill="outline" shape="round" [(ngModel)]="searchString" (ionInput)="onSearch()"></ion-input>
      </ion-col>
      <ion-col size="12">
        <ion-checkbox color="primary" class="ion-margin-top" mode="md" [checked]="selectedEmployee.length === 3" (ionChange)="selectAll($any($event))" labelPlacement="end">Select All</ion-checkbox>
      </ion-col>
    </ion-row>

    <ion-list *ngIf="isDataLoaded">
      <ion-item lines="none" [button]="false" *ngIf="employeeList.length === 0">
        <ion-label class="ion-text-center">No any employee.</ion-label>
      </ion-item>

      <ion-item lines="full" [button]="true" [detail]="true" class="list-item" *ngFor="let employee of employeeList; index as i;">
        <div slot="start" class="check_container" (click)="selectEmployee(employee.guid)">
          <ion-avatar class="employee_img">
            <app-name-img [name]="getName(employee)" [classes]="'sm'" *ngIf="employee.imageUrl.trim() === ''"></app-name-img>
            <img alt="imployee" *ngIf="employee.imageUrl.trim() != ''" [src]="employee.imageUrl || 'https://ionicframework.com/docs/img/demos/avatar.svg'" />
          </ion-avatar>
          <div class="custom_checkbox" *ngIf="isChecked(employee.guid)">
            <span class="checkmark"></span>
          </div>
        </div>
        <div class="employee_data" (click)="goToSetup(employee.guid)">
          <ion-label>{{employee.firstName | titlecase}} {{employee.lastName || '' | titlecase}}</ion-label>
          <ion-text class="role" *ngIf="employee.employeeWorkDetails"><small>{{employee.employeeWorkDetails.jobTitle | titlecase}}</small></ion-text>
          <!-- <ion-text class="emp_salary"><small>Net Pay</small> <span class="amount">450000</span></ion-text> -->
        </div>
      </ion-item>
    </ion-list>
  </div>
  
  
  <ion-infinite-scroll #infiniteScroll (ionInfinite)="isMoreData ? loadData($any($event)) : ''" [position]="'bottom'">
    <ion-infinite-scroll-content *ngIf="isMoreData" loadingSpinner="bubbles" loadingText="Loading more data...">
    </ion-infinite-scroll-content>
  </ion-infinite-scroll>

</ion-content>
<ion-footer *ngIf="selectedEmployee.length > 0">
  <ion-button mode="md" type="button" color="primary" size="large" expand="block" shape="round" class="ion-margin-horizontal sendPayBtn">Send Payslip</ion-button>
</ion-footer>
