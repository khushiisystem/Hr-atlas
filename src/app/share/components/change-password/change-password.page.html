<ion-header [translucent]="true" mode="md">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-button mode="md" [routerDirection]="'back'" (click)="goBack()" fill="clear" [ariaDisabled]="true" class="noRipple noBg">
        <ion-icon name="chevron-back-outline" aria-hidden="true" slot="icon-only"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title>Change Password</ion-title>
    <ion-thumbnail slot="end" class="logo_img ion-margin-end">
      <ion-img src="../../../assets/icon/hr-atlas_logo_2.png" alt="HR-Atlas"></ion-img>
    </ion-thumbnail>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" color="light">
  <form [formGroup]="changePasswordForm" (keyup)="passwordFormSubmit($event)">
    <ion-card mode="ios">
      <ion-card-header>
        <ion-card-subtitle mode="md" color="medium">
          <small>All * fields are required</small>
        </ion-card-subtitle>
        <ion-card-title>Change Password</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <!-- <ion-note color="medium">All * fields are required</ion-note> -->
        <div class="form-input">
          <ion-input labelPlacement="floating" mode="md" fill="outline" class="password_input" formControlName="oldPassword" placeholder="Old password" [type]="showOldPassword ? 'text' : 'password'" [errorText]="changePasswordForm.controls['oldPassword'].touched && changePasswordForm.controls['oldPassword'].errors ? changePasswordForm.controls['oldPassword'].value ? 'Please enter a valid password.' : 'Old password is required' : ''">
            <div slot="label">Old Password <ion-text color="danger">*</ion-text></div>
          </ion-input>
      
          <div class="toggleBtn">
            <ion-button mode="md" slot="end" fill="clear" (click)="showOldPassword = !showOldPassword">
              <ion-icon name="eye-outline" *ngIf="showOldPassword"></ion-icon>
              <ion-icon name="eye-off-outline" *ngIf="!showOldPassword"></ion-icon>
            </ion-button>
          </div>
        </div>
  
        <div class="form-input">
          <ion-input labelPlacement="floating" mode="md" fill="outline" class="password_input" formControlName="newPassword" placeholder="New password" [type]="showNewPassword ? 'text' : 'password'" [clearOnEdit]="false" [errorText]="changePasswordForm.controls['newPassword'].touched && changePasswordForm.controls['newPassword'].errors ? changePasswordForm.controls['newPassword'].value ? 'Enter a valid password.' : 'New password is required.' : ''">
            <div slot="label">New Password <ion-text color="danger">*</ion-text></div>
          </ion-input>
      
          <div class="toggleBtn">
            <ion-button mode="md" slot="end" fill="clear" (click)="showNewPassword = !showNewPassword">
              <ion-icon name="eye-outline" *ngIf="showNewPassword"></ion-icon>
              <ion-icon name="eye-off-outline" *ngIf="!showNewPassword"></ion-icon>
            </ion-button>
          </div>
        </div>
        <p *ngIf="changePasswordForm.errors?.['passwordmatcherror']">
          <ion-text class="error_txt" color="danger">{{'Old and new password shoudn\'t be same.'}}</ion-text>
        </p>
  
        <div class="form-input">
          <ion-input labelPlacement="floating" mode="md" fill="outline" formControlName="confirmPassword" placeholder="Confirm password" [type]="'password'" [clearOnEdit]="false" [errorText]="changePasswordForm.controls['confirmPassword'].touched && changePasswordForm.controls['confirmPassword'].errors ? changePasswordForm.controls['confirmPassword'].value ? 'Enter a valid password.' : 'Confirm password is required.' : ''">
            <div slot="label">Confirm Password <ion-text color="danger">*</ion-text></div>
          </ion-input>
        </div>
        <p *ngIf="changePasswordForm.errors?.['passwordnotmatcherror']"><ion-text class="error_txt" color="danger">confirm password didn't match.</ion-text></p>
      </ion-card-content>
      <ion-button mode="ios" type="submit" color="primary" class="submitBtn ion-margin" [disabled]="changePasswordForm.invalid" (click)="submit()" expand="block" shape="round" [strong]="true">Change Password</ion-button>
    </ion-card>
    <ion-item lines="none" detail="false" color="light" class="ion-margin-horizontal">
      <ion-label class="ion-text-wrap">
        <ion-note color="medium">If you don't remember your old password then reset password.</ion-note>
      </ion-label>
    </ion-item>
  </form>
</ion-content>
