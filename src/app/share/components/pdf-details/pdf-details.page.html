<ion-header [translucent]="true" mode="md">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-button mode="md" [routerDirection]="'back'" [routerLink]="['/tabs/payroll-setup']" routerLinkActive="router-link-active" type="button" fill="clear" [ariaDisabled]="true" class="noRipple noBg">
        <ion-icon name="chevron-back-outline" slot="icon-only"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title>Pdf Details</ion-title>
    <ion-thumbnail slot="end" class="logo_img ion-margin-end">
      <ion-img src="../../../assets/icon/hr-atlas_logo_2.png" alt="HR-Atlas"></ion-img>
    </ion-thumbnail>
    <ion-progress-bar type="indeterminate" *ngIf="!isDataLoaded"></ion-progress-bar>         
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="ion-padding">
  <div class="optbar btns">
    <ion-button style="padding: 0 0 10px 0;" mode="md" color="tertiary" class="" fill="solid" shape="round" size="small"(click)="openCalendar = true">
      <ion-label>{{payslipDate | date:'MMM, y'}}</ion-label>
      <ion-icon slot="end" name="calendar-number-outline"></ion-icon>
    </ion-button>
  </div>
  <ion-modal [isOpen]="openCalendar" #dateModal [initialBreakpoint]=".65" [keepContentsMounted]="true" mode="ios" [backdropDismiss]="false" [showBackdrop]="true" (didDismiss)="openCalendar = false;">
    <ng-template>
      <ion-content>
        <ion-datetime presentation="month-year" size="cover" mode="md" [firstDayOfWeek]="1" #yearMonth [max]="today.toISOString()" (ionChange)="selectPayslipDate($any($event))">
          <ion-label slot="title">Select Year and Month</ion-label>
          <ion-buttons slot="buttons">
            <ion-button mode="md" color="danger" (click)="yearMonth.cancel();dateModal.dismiss()">Cancel</ion-button>
            <ion-button mode="md" color="primary" [disabled]="!payslipDate" (click)="yearMonth.confirm();dateModal.dismiss();">Done</ion-button>
          </ion-buttons>
        </ion-datetime>
      </ion-content>
    </ng-template>
  </ion-modal>

  <ng-container *ngIf="payslipData; else loading">
    <div class="table-container">
      <table class="ion-padding table">
        <thead>
          <tr>
            <th>Employee Name</th>
            <th>Payment</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let payslip of payslipData">
            <td>{{ payslip.employeeName }}</td>
            <td>{{ payslip.netPay }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </ng-container>
  <ng-template #loading>
    <p>Loading data...</p>
  </ng-template>

  <div class="button-container">
    <ion-button size="small" (click)="sendData()">Send</ion-button>
  </div>
</ion-content>